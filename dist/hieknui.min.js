var huConfig={namespace:"hu-"},huBackTop=function(){function t(){this.attrName="",this.cls="",this.clsName="",this.namespace="",this.namespace=huConfig.namespace,this.attrName=this.namespace+"data-pos",this.clsName=this.namespace+"backtop",this.cls="."+this.clsName,this.init()}return t.prototype.init=function(){var t=this;$(window).scroll(function(e){var a=document.body.scrollTop||document.documentElement.scrollTop;$(t.cls).toggleClass("on",a>500)}),$("body").on("click",this.cls,function(e){var a=$(e.currentTarget).attr(t.attrName)||0;$("html,body").animate({scrollTop:a},300)})},t}(),huDropdown=function(){function t(){this.attrName="",this.cls="",this.clsName="",this.itemsCls="",this.namespace="",this.valueName="",this.namespace=huConfig.namespace,this.clsName=this.namespace+"dropdown",this.cls="."+this.clsName,this.attrName=this.namespace+"data-id",this.valueName=this.namespace+"data-value",this.itemsCls="."+this.namespace+"select-dropdown",this.init()}return t.prototype.init=function(){var t=this;$("body").on("click",this.cls+":not(.disabled)>span",function(e){var a=$(e.currentTarget),s=a.attr(t.attrName);if(!s){s=t.namespace+huUtils.randomId(),a.attr(t.attrName,s);var i=a.closest(t.cls),n="inactive ";i.hasClass("dropdown-xs")?n+="dropdown-xs":i.hasClass("dropdown-sm")?n+="dropdown-sm":i.hasClass("dropdown-md")?n+="dropdown-md":i.hasClass("dropdown-lg")&&(n+="dropdown-lg"),a.siblings(t.itemsCls).attr(t.attrName,s).attr("data-role","dropdown").addClass(n).appendTo("body")}var c=a.offset(),l=c.left,r=c.top+a.outerHeight()+4;$(t.itemsCls+"["+t.attrName+'="'+s+'"]').css({top:r,left:l,width:a.outerWidth()}).toggleClass("active inactive")}).on("click",this.itemsCls+">li:not(.disabled)",function(t){var e=$(t.currentTarget);e.addClass("active").siblings(".active").removeClass("active")}).on("click",function(e){$(e.target).closest(t.cls).length||$('.active[data-role="dropdown"]'+t.itemsCls).removeClass("active").addClass("inactive")})},t}();$(function(){new huTabs,new huDropdown,new huSelect,new huTag,new huBackTop});var huPagination=function(){function t(t){if(this.attrName="",this.cls="",this.clsName="",this.defaultConfig={callback:$.noop,cls:"",current:1,jumpEnable:!1,prevNextEnable:!1,prevNextMultiEnable:!1,selector:"",showNum:9,startEndEnable:!0,totalItemShow:!1},this.namespace="",this.config=$.extend(!0,{},this.defaultConfig,t),this.config.total||(this.config.totalItem&&this.config.pageSize?this.config.total=Math.ceil(this.config.totalItem/this.config.pageSize):huUtils.error("total或totalItem与pageSize不能同时为空")),this.config.selector){if(this.namespace=huConfig.namespace,this.clsName=this.namespace+"pagination",this.attrName=this.namespace+"page",this.cls="."+this.clsName,this.$container=$(this.config.selector),this.$container.is("ul"))this.$container.hasClass(this.clsName)||this.$container.addClass(this.clsName);else{var e='<ul class="'+this.clsName+'"></ul>';this.$container.html(e),this.$container=this.$container.find(this.cls)}this.$container.addClass(this.config.cls),this.init()}else huUtils.error("selector不能为空")}return t.prototype.init=function(){this.buildHTML(),this.bindEvent()},t.prototype.buildHTML=function(){var t=this.config.total,e=Math.floor(this.config.current),a="";if(0==t)a="";else if(t<e)a="",huUtils.error("当前页数不能大于总页数");else{var s=this.config.showNum,i=(this.config.showNum-1)/2,n=1,c=t,l=this.config.prevNextEnable,r=this.config.prevNextMultiEnable,o=this.config.startEndEnable,h=this.config.jumpEnable,u=this.config.totalItemShow;c>s&&(e-i>1&&(n=Math.ceil(e-i)),c-e<i?n=c-s+1:c=n+s-1);var d=1!=e,p=d?"":"disabled",m=e!=t,f=m?"":"disabled";u&&(a+='<li class="page-total">共计'+this.config.totalItem+"个</li>"),o&&(a+='<li class="page-item page-first '+p+'" '+this.attrName+'="1" title="首页"></li>'),r&&(a+='<li class="page-item page-prev-multi '+p+'" '+this.attrName+'="'+(e-s<1?1:e-s)+'" title="往前翻'+s+'页"></li>'),l&&(a+='<li class="page-item page-prev '+p+'" '+this.attrName+'="'+(e-1<1?1:e-1)+'" title="上一页"></li>');for(var g=n;g<=c;g++)a+='<li class="page-item '+(g==e?"active":"")+'" '+this.attrName+'="'+g+'">'+g+"</li>";l&&(a+='<li class="page-item page-next '+f+'" '+this.attrName+'="'+(e+1>t?t:e+1)+'" title="下一页"></li>'),r&&(a+='<li class="page-item page-next-multi '+f+'" '+this.attrName+'="'+(e+s>t?t:e+s)+'" title="往后翻'+s+'页"></li>'),o&&(a+='<li class="page-item page-last '+f+'" '+this.attrName+'="'+t+'" title="末页"></li>'),h&&(a+='<li class="page-jump"><span>跳转到</span><input type="number" min="1" max="'+t+'" step="1" class="'+this.namespace+'input" value="'+e+'"><span>页</span></li>')}this.$container.html(a)},t.prototype.bindEvent=function(){var t=this;this.$container.off(),this.$container.on("click","li:not(.disabled)["+this.attrName+"]",{eventData:this.config.data},function(e){var a=e.data.eventData,s=$(e.currentTarget).attr(t.attrName);t.config.callback(e,s,a)}),this.$container.on("click","li.page-jump button",{eventData:this.config.data},function(e){var a=e.data.eventData,s=$(e.currentTarget).prev("input").val();t.goTo(e,s,a)}),this.$container.on("keyup","li.page-jump input",{eventData:this.config.data},function(e){var a=$(e.currentTarget).val(),s=/^[0-9]*$/;if(""==a);else if(s.test(a+""))a>t.config.total?$(e.currentTarget).val(t.config.total):a<1&&$(e.currentTarget).val(1);else{var i=$(e.currentTarget).data("data");$(e.currentTarget).val(i)}}),this.$container.on("keydown","li.page-jump input",{eventData:this.config.data},function(e){var a=e.keyCode||e.which||e.charCode,s=$(e.currentTarget).val();if(13==a){var i=e.data.eventData;t.goTo(e,s,i)}else $(e.currentTarget).data("data",s)})},t.prototype.goTo=function(t,e,a){e<=this.config.total&&e>0?this.config.callback(t,e,a):huUtils.error("跳转页不存在")},t}(),huSelect=function(){function t(){this.attrName="",this.cls="",this.clsName="",this.itemsCls="",this.namespace="",this.valueName="",this.namespace=huConfig.namespace,this.clsName=this.namespace+"select",this.cls="."+this.clsName,this.attrName=this.namespace+"data-id",this.valueName=this.namespace+"data-value",this.itemsCls="."+this.namespace+"select-dropdown",this.init()}return t.prototype.init=function(){var t=this;$("body").on("click",this.cls+":not(.disabled)>span",function(e){var a=$(e.currentTarget),s=a.attr(t.attrName);if(!s){s=t.namespace+huUtils.randomId(),a.attr(t.attrName,s);var i=a.closest(t.cls),n="inactive ";i.hasClass("select-xs")?n+="select-xs":i.hasClass("select-sm")?n+="select-sm":i.hasClass("select-md")?n+="select-md":i.hasClass("select-lg")&&(n+="select-lg"),a.siblings(t.itemsCls).attr(t.attrName,s).attr("data-role","select").addClass(n).appendTo("body")}var c=a.offset(),l=c.left,r=c.top+a.outerHeight()+4;$(t.itemsCls+"["+t.attrName+'="'+s+'"]').css({top:r,left:l,width:a.outerWidth()}).toggleClass("active inactive")}).on("click",this.itemsCls+">li:not(.disabled)",function(e){var a=$(e.currentTarget);a.addClass("active").siblings(".active").removeClass("active");var s=a.parent().attr(t.attrName),i=a.attr(t.valueName),n=a.text();$(t.cls+" span["+t.attrName+'="'+s+'"]').text(n).attr(t.valueName,i)}).on("click",function(e){$(e.target).closest(t.cls).length||$('.active[data-role="select"]'+t.itemsCls).removeClass("active").addClass("inactive")})},t}(),huTabs=function(){function t(){t.namespace=huConfig.namespace,t.clsName=t.namespace+"tabs",t.cls="."+t.clsName,t.init()}return t.bindEvent=function(){var e=">.tabs-nav-container:not(.show-all)>.tabs-wrap";$("body").on("click",t.cls+">li:not(.disabled)",function(e){var a=$(e.currentTarget),s=a.find("a").attr("href");a=$('a[href="'+s+'"]').closest("li");var i=$(s),n=i.siblings(".active"),c="#"+n.attr("id"),l=$('a[href="'+c+'"]').closest("li");a.addClass("active"),i.addClass("active"),l.removeClass("active"),n.removeClass("active"),a.each(function(e,a){t.resize($(a).closest(t.cls))})}).on("click",".tabs-prev-control:not(.disabled)",function(e){var a=$(e.currentTarget),s=a.siblings(".tabs-wrap"),i=t.isVertical(a),n="outerWidth";i&&(n="outerHeight");var c=s[n]();t.resetPos(s,c,i)}).on("click",".tabs-next-control:not(.disabled)",function(e){var a=$(e.currentTarget),s=a.siblings(".tabs-wrap"),i=t.isVertical(a),n="outerWidth";i&&(n="outerHeight");var c=s[n]();t.resetPos(s,-c,i)}).on("mousewheel",".tabs-left"+e+",.tabs-right"+e,function(e){var a=$(e.currentTarget);t.resetPos(a,e.deltaY*e.deltaFactor,!0)}),$(window).resize(function(e){t.resizeAll()})},t.calcEnable=function(e,a){var s=e.parent(),i="width",n="margin-left";return t.isVertical(e)&&(i="height",n="margin-top"),a="undefined"==typeof a?parseInt(e.css(n)):a,{prev:a<0,next:s[i]()-a<e[i]()}},t.init=function(){t.bindEvent(),t.resizeAll()},t.isVertical=function(t){return t.closest(".tabs-nav-container").parent(".tabs-left,.tabs-right").length>0},t.resetAllClickable=function(){$(t.cls).each(function(e,a){t.resetClickable($(a))})},t.resetClickable=function(e,a,s){if("undefined"==typeof a||"undefined"==typeof s){var i=t.calcEnable(e);a=i.prev,s=i.next}var n=e.parent();n.siblings(".tabs-prev-control").toggleClass("disabled",!a),n.siblings(".tabs-next-control").toggleClass("disabled",!s)},t.resetDecorationPos=function(e){var a=t.isVertical(e),s="width",i="outerWidth",n="outerHeight",c="left";a&&(s="height",i="outerHeight",n="outerWidth",c="top");var l=e[i](),r=e[n](),o=e.position()[c]+e.parent().position()[c]+parseInt(e.parent().css("margin-"+c)),h=e.closest(".tabs-wrap").siblings(".tabs-decoration");h[s](l),h.css(c,o),console.log(e,h,l,r,o)},t.resetPos=function(e,a,s){var i=e.children("ul"),n="outerWidth",c="margin-left";s&&(n="outerHeight",c="margin-top");var l=e[n](),r=i[n]()-l,o=parseInt(i.css(c)),h=o+a,u=h>-r?h:-r;u=u<0?u:0,i.css(c,u),t.resetClickable(i,0!==u,u!==-r)},t.resizeAll=function(){t.wrapAll(),$(t.cls).each(function(e,a){t.resize($(a))})},t.resize=function(e){var a="width",s="outerWidth",i="left",n="margin-"+i;t.isVertical(e)&&(a="height",s="outerHeight",i="top",n="margin-"+i);var c=0;e.children("li").each(function(t,e){c+=$(e)[s]()});var l=e.closest(".tabs-nav-container"),r=l[a]();if(l.toggleClass("show-all",r>=c),r<c){e[a](c);var o=e.children("li.active"),h=o.position()[i],u=parseInt(e.css(n));h+u<0?u=-h:h+o[s]()+u>r&&(u=r-o[s]()-h);var d=e[a]();r>d+u&&u<0&&(u=r-d),e.css(n,u);var p=t.calcEnable(e,u);t.resetClickable(e,p.prev,p.next)}},t.wrapAll=function(){$(t.cls).each(function(e,a){t.wrap($(a))})},t.wrap=function(t){if(!t.parent(".tabs-wrap").length){var e='<div class="tabs-wrap"></div>',a='<div class="tabs-nav-container"></div>',s="",i=s+'<div class="tabs-control tabs-prev-control"></div><div class="tabs-control tabs-next-control"></div>';t.wrap(a).after(i).wrap(e)}},t.cls="",t.clsName="",t.namespace="",t}(),huTag=function(){function t(){this.cls="",this.clsName="",this.namespace="",this.namespace=huConfig.namespace,this.clsName=this.namespace+"tag",this.cls="."+this.clsName,this.init()}return t.prototype.init=function(){var t=this;$("body").on("click",this.cls+":not(.disabled) .close",function(e){$(e.currentTarget).closest(t.cls).remove()})},t}(),huUtils=function(){function t(){}return t.randomId=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=""),t+(new Date).getTime()+Math.ceil(1e3*Math.random())+e},t.error=function(t){console.error(t)},t}();